<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>AI Education System</title>
  <style>
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
      font-family: Arial, sans-serif;
    }
    body {
      line-height: 1.6;
    }
    header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 20px;
      border-bottom: 1px solid #ccc;
    }
    .logo-section {
      display: flex;
      align-items: center;
    }
    .logo-section img {
      width: 40px;
      height: 40px;
      border-radius: 50%;
      margin-right: 10px;
    }
    nav a {
      margin-left: 20px;
      text-decoration: none;
      color: black;
    }
    .section {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 60px 20px;
      flex-wrap: wrap;
    }
    .section-text, .section-graphic {
      flex: 1 1 45%;
      padding: 20px;
    }
    .section-text h1, .section-text h2 {
      font-size: 2.5rem;
      font-weight: bold;
      margin-bottom: 20px;
    }
    .section-text p {
      font-size: 1rem;
      color: #333;
    }
    .section-graphic img {
      max-width: 100%;
    }
    .paths-section {
      background-color: #e6f1f8;
      padding: 60px 20px;
      display: flex;
      flex-direction: column;
      align-items: center;
      text-align: center;
    }
    .paths-text {
      max-width: 800px;
      margin-bottom: 50px;
      padding: 0 20px;
    }
    .paths-text h2 {
      font-size: 2.5rem;
      font-weight: bold;
      margin-bottom: 20px;
    }
    .paths-text p {
      font-size: 1rem;
      line-height: 1.6;
    }
    .path-content {
      display: flex;
      justify-content: center;
      gap: 30px;
      max-width: 1400px;
      width: 100%;
      flex-wrap: wrap;
    }
    .path-box {
      flex: 0 1 380px;
      background: white;
      border-radius: 15px;
      padding: 25px;
      box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
      transition: transform 0.3s ease, box-shadow 0.3s ease;
      text-align: center;
      min-height: 320px;
      display: flex;
      flex-direction: column;
      justify-content: center;
    }
    .path-box:hover {
      transform: translateY(-5px);
      box-shadow: 0 6px 25px rgba(0, 0, 0, 0.15);
    }
    .path-box img {
      width: 80px;
      height: 80px;
      margin: 0 auto 20px auto;
      display: block;
    }
    .path-box h3 {
      font-size: 1.8rem;
      margin-bottom: 15px;
      color: #333;
    }
    .path-box p {
      line-height: 1.6;
      color: #666;
      text-align: center;
    }
    .cta-section {
      background-color: #6b8ed6;
      color: white;
      text-align: center;
      padding: 60px 20px;
    }
    .cta-section h2 {
      font-size: 2.5rem;
      font-weight: bold;
      margin-bottom: 20px;
    }
    .cta-section p {
      font-size: 1.2rem;
      margin-bottom: 30px;
    }
    .cta-section a button {
      padding: 10px 20px;
      background-color: #ffcc00;
      border: none;
      font-size: 1rem;
      cursor: pointer;
    }
    footer {
      text-align: center;
      padding: 20px;
      font-size: 0.9rem;
      background: #f1f1f1;
    }

    /* Responsive design for paths section */
    @media (max-width: 768px) {
      .paths-text {
        margin-bottom: 30px;
      }
      
      .paths-text h2 {
        font-size: 2rem;
      }
      
      .path-content {
        flex-direction: column;
        gap: 20px;
        align-items: center;
      }
      
      .path-box {
        flex: none;
        width: 100%;
        max-width: 400px;
        min-height: auto;
        padding: 25px;
      }
      
      .path-box h3 {
        font-size: 1.5rem;
      }
    }
    
    .modal-tabs {
      display: flex;
      margin-bottom: 20px;
      border-bottom: 2px solid #ddd;
    }
    
    .tab-button {
      flex: 1;
      padding: 10px;
      background: transparent;
      border: none;
      cursor: pointer;
      font-weight: bold;
      border-bottom: 2px solid transparent;
    }
    
    .tab-button.active {
      border-bottom-color: #ffc107;
      color: #333;
    }
    
    .tab-content {
      display: none;
    }
    
    .tab-content.active {
      display: block;
    }
    
    .quick-start-option {
      background: #f9f9f9;
      padding: 15px;
      margin: 10px 0;
      border-radius: 5px;
      border: 2px solid #ddd;
      cursor: pointer;
      transition: all 0.3s ease;
    }
    
    .quick-start-option:hover {
      border-color: #ffc107;
      background: #fff9e6;
    }
    
    .guest-demo {
      text-align: center;
      padding: 20px;
      background: #e8f5e8;
      border-radius: 5px;
      margin: 20px 0;
    }
    
    .status-indicator {
      position: fixed;
      top: 20px;
      right: 20px;
      padding: 10px 15px;
      border-radius: 5px;
      color: white;
      font-weight: bold;
      z-index: 1000;
      display: none;
    }
    
    .status-indicator.success {
      background: #28a745;
    }
    
    .status-indicator.error {
      background: #dc3545;
    }
    
    .status-indicator.warning {
      background: #ffc107;
      color: black;
    }
  </style>
</head>
<body>
  <!-- Status Indicator -->
  <div id="statusIndicator" class="status-indicator"></div>

  <header>
    <div class="logo-section">
      <img src="image/logo.svg"Logo">
      <strong>AI Education System</strong>
    </div>
    <nav>
      <a href="#">Home</a>
      <a href="templates/course.html">Course</a>
      <a href="#">About Us</a>
      <a href="#">Contact</a>
    </nav>
  </header>

  <section class="section">
    <div class="section-text">
      <h1>Learn Smarter <br> Not Harder</h1>
      <p>Ucapkan selamat tinggal pada pendidikan yang seragam. Platform berbasis AI kami menyesuaikan pelajaran, kuis, dan rencana belajar hanya untuk Anda—berdasarkan tujuan, gaya belajar, dan kecepatan Anda.</p>
    </div>
    <div class="section-graphic">
      <img src="image/data visualization.svg" alt="Learning illustration">
    </div>
  </section>

  <section class="paths-section">
    <div class="paths-text">
      <h2>Jalur Belajar</h2>
      <p>Kami tidak percaya pada pendidikan yang seragam. Platform kami membangun perjalanan belajar Anda secara dinamis berdasarkan keterampilan dan minat Anda saat ini.</p>
    </div>
    <div class="path-content">
      <div class="path-box">
        <img src="image/frame.svg" alt="Data Analyst Icon">
        <h3>Data Analyst</h3>
        <p>Mengubah raw data menjadi insight yang dapat diambil langsung. Belajar bekerja dengan database, membuat laporan yang menarik, berkomunikasi dari hasil analisis yang memacu keputusan bisnis. Tools yang digunakan seperti SQL, Excel, dan platform visualisasi.</p>
      </div>
      <div class="path-box">
        <img src="image/de.svg" alt="Data Engineer Icon">
        <h3>Data Engineer</h3>
        <p>Membangun infrastruktur yang memacu keputusan berbasis data. Merancang dan memelihara sistem yang mengumpulkan, menyimpan, dan memproses volume data besar. Bekerja dengan database, ETL pipeline, dan platform cloud untuk memastikan data mengalir efisien di seluruh organisasi.</p>
      </div>
      <div class="path-box">
        <img src="image/Data Science.svg" alt="Data Science Icon">
        <h3>Data Scientist</h3>
        <p>Menganalisa data untuk membangun model prediktif dan sistem otomatis yang memahami data besar dan kompleks. Mereka menerapkan metode statistik, algoritma pembelajaran mesin, dan pemrograman untuk menemukan pola dan menghasilkan insight yang memacu inovasi dan keputusan strategis.</p>
      </div>
    </div>
  </section>
  
  <!-- Enhanced Modal with Backend Integration -->
<div id="authModal" style="display:none; position:fixed; top:0; left:0; width:100%; height:100%; background-color:rgba(0,0,0,0.6); z-index:999;">
    <div style="background:#eaf1ff; width:90%; max-width:700px; margin:50px auto; padding:0; border-radius:8px; overflow:hidden;">
      
      <!-- Modal Header with Tabs -->
      <div class="modal-content" style="padding:30px;">
        <div class="modal-tabs">
          <button class="tab-button active" onclick="switchTab('login')">Login</button>
          <button class="tab-button" onclick="switchTab('signup')">Sign Up</button>
          <button class="tab-button" onclick="switchTab('demo')">Try Demo</button>
        </div>

        <!-- Login Tab -->
        <div id="login-tab" class="tab-content active">
          <div style="display:flex; flex-wrap:wrap; gap:20px; align-items:center;">
            <div style="flex:1; min-width:250px;">
              <img src="image/login.svg" alt="Login Illustration" style="width:100%; max-width:300px;">
            </div>
            <div style="flex:1; min-width:300px;">
              <h3 style="margin-bottom:15px;">Selamat Datang Kembali!</h3>
              <p style="margin-bottom:20px; color:#666;">Lanjutkan perjalanan belajar pribadi Anda.</p>
              
              <label><strong>Alamat Email</strong></label><br>
              <input type="email" id="loginEmail" placeholder="Enter your email" 
                     style="width:100%;padding:10px;margin-top:5px;border-radius:5px;border:1px solid #ccc;"><br>
              <small>Kami tidak akan pernah membagikan alamat email Anda.</small><br><br>

              <label><strong>Password</strong></label><br>
              <input type="password" id="loginPassword" placeholder="Enter your password" 
                     style="width:100%;padding:10px;margin-top:5px;border-radius:5px;border:1px solid #ccc;"><br>
              <small>Pastikan password Anda minimal 8 karakter.</small><br><br>

              <div style="display:flex; gap:10px; flex-wrap:wrap;">
                <button onclick="handleLogin()" 
                        style="padding:10px 20px;background:black;color:white;border:none;border-radius:5px;cursor:pointer;flex:1;">
                  MASUK
                </button>
                <button onclick="forgotPassword()" 
                        style="padding:10px 20px;background:#f8f9fa;border:1px solid #ddd;border-radius:5px;cursor:pointer;">
                  Lupa?
                </button>
              </div>
            </div>
          </div>
        </div>

        <!-- Sign Up Tab -->
        <div id="signup-tab" class="tab-content">
          <div style="display:flex; flex-wrap:wrap; gap:20px; align-items:center;">
            <div style="flex:1; min-width:250px;">
              <img src="image/login.svg" alt="Signup Illustration" style="width:100%; max-width:300px;">
            </div>
            <div style="flex:1; min-width:300px;">
              <h3 style="margin-bottom:15px;">Mulai Perjalanan Anda!</h3>
              <p style="margin-bottom:20px; color:#666;">Buat akun untuk memulai belajar pribadi.</p>
              
              <label><strong>Nama Lengkap</strong></label><br>
              <input type="text" id="signupName" placeholder="Masukkan nama lengkap Anda" 
                     style="width:100%;padding:10px;margin-top:5px;border-radius:5px;border:1px solid #ccc;"><br><br>

              <label><strong>Alamat Email</strong></label><br>
              <input type="email" id="signupEmail" placeholder="Masukkan alamat email Anda" 
                     style="width:100%;padding:10px;margin-top:5px;border-radius:5px;border:1px solid #ccc;"><br><br>

              <label><strong>Pilih Jalur Belajar Anda</strong></label><br>
              <select id="signupPath" style="width:100%;padding:10px;margin-top:5px;border-radius:5px;border:1px solid #ccc;">
                <option value="">Pilih jalur belajar Anda</option>
                <option value="data_analyst">Data Analyst</option>
                <option value="data_engineer">Data Engineer</option>
                <option value="data_scientist">Data Scientist</option>
              </select><br><br>

              <button onclick="handleSignup()" 
                      style="padding:10px 20px;background:#ffc107;border:1px solid #000;border-radius:5px;cursor:pointer;width:100%;font-weight:bold;">
                BUAT AKUN & MULAI ASSESSMENT
              </button>
            </div>
          </div>
        </div>

        <!-- Demo Tab -->
        <div id="demo-tab" class="tab-content">
          <div class="guest-demo">
            <h3 style="margin-bottom:15px;">🚀 Coba Sistem Pendidikan AI Kami</h3>
            <p style="margin-bottom:20px;">Rasakan platform kami tanpa membuat akun. Pilih jalur demo di bawah ini:</p>
            
            <div class="quick-start-option" onclick="startDemo('data_analyst')">
              <h4>📊 Demo Data Analyst</h4>
              <p>Rasakan analisis data, visualisasi, dan tantangan kecerdasan bisnis</p>
            </div>
            
            <div class="quick-start-option" onclick="startDemo('data_engineer')">
              <h4>🔧 Demo Data Engineer</h4>
              <p>Rasakan desain basis data, pipa ETL, dan tantangan infrastruktur data</p>
            </div>
            
            <div class="quick-start-option" onclick="startDemo('data_scientist')">
              <h4>🧠 Demo Data Scientist</h4>
              <p>Rasakan machine learning, analisis statistik, dan skenario pemodelan prediktif</p>
            </div>
            
            <div style="margin-top:20px; padding:15px; background:#fff3cd; border-radius:5px;">
              <small><strong>Catatan:</strong> Progres demo tidak akan disimpan. Buat akun untuk pengalaman pribadi lengkap.</small>
            </div>
          </div>
        </div>

        <!-- Close button -->
        <button onclick="closeModal()" 
                style="position:absolute; top:10px; right:15px; background:none; border:none; font-size:24px; cursor:pointer;">
          ×
        </button>
      </div>
    </div>
  </div>

  <section class="cta-section">
    <h2>Mulai Perjalanan Belajar Anda!</h2>
    <p>Apakah Anda ingin menjadi Data Analyst, Data Engineer, atau Data Scientist, perjalanan belajar pribadi Anda dimulai di sini. Daftar dan biarkan AI kami membimbing Anda—langkah demi langkah—menuju karir di bidang data.</p>
    <a href="#" onclick="openModal()"><button>MULAI PERJALANAN ANDA</button></a>
  </section>

  <footer>
    &copy; 2025 by Hackathon Team
  </footer>

  <script>
    // Global variables
    let currentUser = null;
    const API_BASE_URL = 'http://localhost:8000/api'; // Update this to match your backend
    
    // API utility function
    async function makeAPICall(endpoint, method = 'GET', data = null) {
      try {
        showStatus('Connecting to AI system...', 'warning');
        
        const config = {
          method: method,
          headers: {
            'Content-Type': 'application/json',
          }
        };
        
        if (data) {
          config.body = JSON.stringify(data);
        }
        
        const response = await fetch(`${API_BASE_URL}${endpoint}`, config);
        
        if (!response.ok) {
          throw new Error(`Server responded with status: ${response.status}`);
        }
        
        const result = await response.json();
        hideStatus();
        return result;
      } catch (error) {
        console.error('API call failed:', error);
        showStatus(`Connection failed: ${error.message}`, 'error');
        return null;
      }
    }

    // Status indicator functions
    function showStatus(message, type = 'warning') {
      const indicator = document.getElementById('statusIndicator');
      indicator.textContent = message;
      indicator.className = `status-indicator ${type}`;
      indicator.style.display = 'block';
    }

    function hideStatus() {
      document.getElementById('statusIndicator').style.display = 'none';
    }

    // Modal functions
    function openModal() {
      document.getElementById('authModal').style.display = 'block';
      // Check backend connection when modal opens
      checkBackendConnection();
    }

    function closeModal() {
      document.getElementById('authModal').style.display = 'none';
    }

    function switchTab(tabName) {
      // Remove active class from all tabs
      document.querySelectorAll('.tab-button').forEach(btn => btn.classList.remove('active'));
      document.querySelectorAll('.tab-content').forEach(content => content.classList.remove('active'));
      
      // Activate selected tab
      document.querySelector(`[onclick="switchTab('${tabName}')"]`).classList.add('active');
      document.getElementById(`${tabName}-tab`).classList.add('active');
    }

    // Backend connection check
    async function checkBackendConnection() {
      try {
        const response = await fetch(`${API_BASE_URL}/health`);
        if (response.ok) {
          showStatus('✅ AI system connected', 'success');
          setTimeout(hideStatus, 2000);
        } else {
          throw new Error('Backend not responding');
        }
      } catch (error) {
        showStatus('⚠️ Backend offline - Demo mode only', 'warning');
        // Don't hide this warning immediately
      }
    }

    // Authentication functions (no sessionStorage)
    async function handleLogin() {
      const email = document.getElementById('loginEmail').value.trim();
      const password = document.getElementById('loginPassword').value;
      
      if (!email || !password) {
        showStatus('Please fill in all fields', 'error');
        setTimeout(hideStatus, 3000);
        return;
      }
      
      // For now, simulate login since the backend doesn't have authentication yet
      // In a real implementation, you would call an auth endpoint
      showStatus('Logging in...', 'warning');
      
      // Simulate API call delay
      setTimeout(() => {
        showStatus('✅ Login successful!', 'success');
        setTimeout(() => {
          closeModal();
          // Redirect to course selection with user info in URL
          const userParams = new URLSearchParams({
            username: email.split('@')[0],
            email: email,
            returning_user: 'true'
          });
          window.location.href = `templates/course.html?${userParams.toString()}`;
        }, 1500);
      }, 1000);
    }

    async function handleSignup() {
      const name = document.getElementById('signupName').value.trim();
      const email = document.getElementById('signupEmail').value.trim();
      const path = document.getElementById('signupPath').value;
      
      if (!name || !email || !path) {
        showStatus('Please fill in all fields', 'error');
        setTimeout(hideStatus, 3000);
        return;
      }
      
      if (!isValidEmail(email)) {
        showStatus('Please enter a valid email address', 'error');
        setTimeout(hideStatus, 3000);
        return;
      }
      
      try {
        showStatus('Creating your account...', 'warning');
        
        // Create user account using the existing backend endpoint
        const response = await makeAPICall('/user/login', 'POST', {
          username: name,
          specialization: path
        });
        
        if (response) {
          showStatus('✅ Account created successfully!', 'success');
          
          setTimeout(() => {
            closeModal();
            // Redirect to course page with user info in URL
            const userParams = new URLSearchParams({
              user_id: response.user_id,
              username: name,
              email: email,
              specialization: path,
              new_user: 'true'
            });
            window.location.href = `templates/course.html?${userParams.toString()}`;
          }, 1500);
        }
      } catch (error) {
        showStatus('Failed to create account. Please try again.', 'error');
        setTimeout(hideStatus, 3000);
      }
    }

    // Demo functions (no sessionStorage)
    function startDemo(path) {
      showStatus('Starting demo session...', 'warning');
      
      setTimeout(() => {
        showStatus('✅ Demo ready!', 'success');
        setTimeout(() => {
          closeModal();
          window.location.href = `templates/course.html?demo=true&path=${path}`;
        }, 1000);
      }, 1000);
    }

    function forgotPassword() {
      showStatus('Password reset feature coming soon!', 'warning');
      setTimeout(hideStatus, 3000);
    }

    // Utility functions
    function isValidEmail(email) {
      const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
      return emailRegex.test(email);
    }

    // Event listeners (no sessionStorage)
    document.addEventListener('DOMContentLoaded', function() {
      // Check if user is returning from course page
      const urlParams = new URLSearchParams(window.location.search);
      if (urlParams.get('welcome') === 'back') {
        showStatus('Welcome back! Ready to continue learning?', 'success');
        setTimeout(hideStatus, 4000);
      }
      
      // Show welcome message if user just signed up
      if (urlParams.get('new_signup') === 'true') {
        showStatus('Welcome to AI Education System!', 'success');
        setTimeout(hideStatus, 3000);
      }
    });

    // Close modal on outside click
    window.onclick = function(e) {
      const modal = document.getElementById('authModal');
      if (e.target === modal) {
        closeModal();
      }
    }

    // Enhanced CTA button functionality
    document.querySelector('.cta-section a').addEventListener('click', function(e) {
      e.preventDefault();
      openModal();
    });
  </script>
</body>
</html>